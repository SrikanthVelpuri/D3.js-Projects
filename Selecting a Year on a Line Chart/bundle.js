(function (d3) {
  'use strict';

  const colorLegend = (selection, props) => {
    const {
      colorScale,
      circleRadius,
      spacing,
      textOffset
    } = props;

    const groups = selection.selectAll('g')
      .data(colorScale.domain());
    const groupsEnter = groups
      .enter().append('g')
        .attr('class', 'tick');
    groupsEnter
      .merge(groups)
        .attr('transform', (d, i) =>
          `translate(0, ${i * spacing})`
        );
    groups.exit().remove();

    groupsEnter.append('circle')
      .merge(groups.select('circle'))
        .attr('r', circleRadius)
        .attr('fill', colorScale);

    groupsEnter.append('text')
      .merge(groups.select('text'))
        .text(d => d)
        .attr('dy', '0.32em')
        .attr('x', textOffset);
  };

  const parseYear = d3.timeParse('%Y');

  const allCaps = str => str === str.toUpperCase();
  const isRegion = name => allCaps(name) && name !== 'WORLD';

  const melt = (unData, minYear, maxYear) => {
    const years = d3.range(minYear, maxYear + 1);

    const data = [];

    unData.forEach(d => {
      const name = d['Region, subregion, country or area *']
        .replace('AND THE', '&');
      years.forEach(year => {
        const population = +d[year].replace(/ /g, '') * 1000;
        const row = {
          year: parseYear(year),
          name,
          population
        };
        data.push(row);
      });
    });

    return data.filter(d => isRegion(d.name));
  };

  const loadAndProcessData = () => 
    Promise
      .all([
        d3.csv('https://vizhub.com/curran/datasets/un-population-estimates-2017-medium-variant.csv'),
        d3.csv('https://vizhub.com/curran/datasets/un-population-estimates-2017.csv'),
      ])
      .then(([unDataMediumVariant, unDataEstimates]) => {
        return melt(unDataEstimates, 1950, 2014)
          .concat(melt(unDataMediumVariant, 2015, 2100));
      });

  const lineChart = (selection, props) => {
    const {
      colorValue,
      colorScale,
      yValue,
      title,
      xValue,
      xAxisLabel,
      circleRadius,
      yAxisLabel,
      margin,
      width,
      height,
      data,
      nested,
      selectedYear,
      setSelectedYear
    } = props;

    const innerWidth = width - margin.left - margin.right;
    const innerHeight = height - margin.top - margin.bottom;

    const xScale = d3.scaleTime()
      .domain(d3.extent(data, xValue))
      .range([0, innerWidth]);
    
    const yScale = d3.scaleLinear()
      .domain(d3.extent(data, yValue))
      .range([innerHeight, 0])
      .nice();
    
    
    const g = selection.selectAll('.container').data([null]);
    const gEnter = g.enter()
      .append('g')
        .attr('class', 'container');
    gEnter.merge(g)
      .attr('transform', `translate(${margin.left},${margin.top})`);
    
    const xAxis = d3.axisBottom(xScale)
      .tickSize(-innerHeight)
      .tickPadding(15);
    
    const yAxisTickFormat = number =>
      d3.format('.2s')(number)
        .replace('G', 'B')
        .replace('.0', '');

    const yAxis = d3.axisLeft(yScale)
      .tickSize(-innerWidth)
      .tickFormat(yAxisTickFormat)
      .tickPadding(10);
    
    const yAxisGEnter = gEnter
      .append('g')
        .attr('class', 'y-axis');
    const yAxisG = g.select('.y-axis');
    yAxisGEnter
      .merge(yAxisG)
        .call(yAxis)
        .selectAll('.domain').remove();
    
    yAxisGEnter
      .append('text')
        .attr('class', 'axis-label')
        .attr('y', -60)
        .attr('fill', 'black')
        .attr('transform', `rotate(-90)`)
        .attr('text-anchor', 'middle')
      .merge(yAxisG.select('.axis-label'))
        .attr('x', -innerHeight / 2)
        .text(yAxisLabel);
    
    const xAxisGEnter = gEnter
      .append('g')
        .attr('class', 'x-axis');
    const xAxisG = g.select('.x-axis');
    xAxisGEnter
      .merge(xAxisG)
        .call(xAxis)
        .attr('transform', `translate(0,${innerHeight})`)
        .select('.domain').remove();
    
    xAxisGEnter
      .append('text')
        .attr('class', 'axis-label')
        .attr('y', 80)
        .attr('fill', 'black')
      .merge(xAxisG.select('.axis-label'))
        .attr('x', innerWidth / 2)
        .text(xAxisLabel);
    
    const lineGenerator = d3.line()
      .x(d => xScale(xValue(d)))
      .y(d => yScale(yValue(d)))
      .curve(d3.curveBasis);
    
    
    const linePaths = g.merge(gEnter)
      .selectAll('.line-path').data(nested);
    linePaths
      .enter().append('path')
        .attr('class', 'line-path')
      .merge(linePaths)
        .attr('d', d => lineGenerator(d.values))
        .attr('stroke', d => colorScale(d.key));
    
    const selectedYearDate = parseYear(selectedYear);
    gEnter
      .append('line')
        .attr('class', 'selected-year-line')
        .attr('y1', 0)
      .merge(g.select('.selected-year-line'))
        .attr('x1', xScale(selectedYearDate))
        .attr('x2', xScale(selectedYearDate))
        .attr('y2', innerHeight);
    
    gEnter
      .append('text')
        .attr('class', 'title')
        .attr('y', -10)
      .merge(g.select('.title'))
        .text(title);
    
    gEnter
      .append('rect')
        .attr('class', 'mouse-interceptor')
        .attr('fill', 'none')
        .attr('pointer-events', 'all')
      .merge(g.select('.mouse-interceptor'))
        .attr('width', innerWidth)
        .attr('height', innerHeight)
        .on('mousemove', function() {
          const x = d3.mouse(this)[0];
          const hoveredDate = xScale.invert(x);
          setSelectedYear(hoveredDate.getFullYear());
        });
  };

  const svg = d3.select('svg');
  const lineChartG = svg.append('g');
  const colorLegendG = svg.append('g');

  const width = +svg.attr('width');
  const height = +svg.attr('height');

  // State
  let selectedYear = 2018;
  let data;

  const setSelectedYear = year => {
    selectedYear = year;
    render();
  };

  const render = () => {
    const yValue = d => d.population;
    const colorValue = d => d.name;
    const colorScale = d3.scaleOrdinal(d3.schemeCategory10);
    
    const lastYValue = d =>
      yValue(d.values[d.values.length - 1]);
    
    const nested = d3.nest()
      .key(colorValue)
      .entries(data)
      .sort((a, b) =>
        d3.descending(lastYValue(a), lastYValue(b))
      );
    
    colorScale.domain(nested.map(d => d.key));
    
    lineChartG.call(lineChart, {
      colorScale,
      colorValue,
      yValue,
      title: 'Population over Time by Region',
      xValue: d => d.year,
      xAxisLabel: 'Time',
      circleRadius: 6,
      yAxisLabel: 'Population',
      margin: {
        top: 60,
        right: 280,
        bottom: 88,
        left: 105
      },
      width,
      height,
      data,
      nested,
      selectedYear,
      setSelectedYear
    });
    
    colorLegendG
      .attr('transform', `translate(700,110)`)
      .call(colorLegend, {
        colorScale,
        circleRadius: 10,
        spacing: 55,
        textOffset: 15
      });
  };

  loadAndProcessData()
    .then((loadedData) => {
      data = loadedData;
      render();
    });

}(d3));

//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiaW5kZXguanMiLCJzb3VyY2VzIjpbIi4uL2NvbG9yTGVnZW5kLmpzIiwiLi4vbG9hZEFuZFByb2Nlc3NEYXRhLmpzIiwiLi4vbGluZUNoYXJ0LmpzIiwiLi4vaW5kZXguanMiXSwic291cmNlc0NvbnRlbnQiOlsiZXhwb3J0IGNvbnN0IGNvbG9yTGVnZW5kID0gKHNlbGVjdGlvbiwgcHJvcHMpID0+IHtcbiAgY29uc3Qge1xuICAgIGNvbG9yU2NhbGUsXG4gICAgY2lyY2xlUmFkaXVzLFxuICAgIHNwYWNpbmcsXG4gICAgdGV4dE9mZnNldFxuICB9ID0gcHJvcHM7XG5cbiAgY29uc3QgZ3JvdXBzID0gc2VsZWN0aW9uLnNlbGVjdEFsbCgnZycpXG4gICAgLmRhdGEoY29sb3JTY2FsZS5kb21haW4oKSk7XG4gIGNvbnN0IGdyb3Vwc0VudGVyID0gZ3JvdXBzXG4gICAgLmVudGVyKCkuYXBwZW5kKCdnJylcbiAgICAgIC5hdHRyKCdjbGFzcycsICd0aWNrJyk7XG4gIGdyb3Vwc0VudGVyXG4gICAgLm1lcmdlKGdyb3VwcylcbiAgICAgIC5hdHRyKCd0cmFuc2Zvcm0nLCAoZCwgaSkgPT5cbiAgICAgICAgYHRyYW5zbGF0ZSgwLCAke2kgKiBzcGFjaW5nfSlgXG4gICAgICApO1xuICBncm91cHMuZXhpdCgpLnJlbW92ZSgpO1xuXG4gIGdyb3Vwc0VudGVyLmFwcGVuZCgnY2lyY2xlJylcbiAgICAubWVyZ2UoZ3JvdXBzLnNlbGVjdCgnY2lyY2xlJykpXG4gICAgICAuYXR0cigncicsIGNpcmNsZVJhZGl1cylcbiAgICAgIC5hdHRyKCdmaWxsJywgY29sb3JTY2FsZSk7XG5cbiAgZ3JvdXBzRW50ZXIuYXBwZW5kKCd0ZXh0JylcbiAgICAubWVyZ2UoZ3JvdXBzLnNlbGVjdCgndGV4dCcpKVxuICAgICAgLnRleHQoZCA9PiBkKVxuICAgICAgLmF0dHIoJ2R5JywgJzAuMzJlbScpXG4gICAgICAuYXR0cigneCcsIHRleHRPZmZzZXQpO1xufSIsImltcG9ydCB7IGNzdiwgcmFuZ2UsIHRpbWVQYXJzZSB9IGZyb20gJ2QzJztcblxuZXhwb3J0IGNvbnN0IHBhcnNlWWVhciA9IHRpbWVQYXJzZSgnJVknKTtcblxuY29uc3QgYWxsQ2FwcyA9IHN0ciA9PiBzdHIgPT09IHN0ci50b1VwcGVyQ2FzZSgpO1xuY29uc3QgaXNSZWdpb24gPSBuYW1lID0+IGFsbENhcHMobmFtZSkgJiYgbmFtZSAhPT0gJ1dPUkxEJztcblxuY29uc3QgbWVsdCA9ICh1bkRhdGEsIG1pblllYXIsIG1heFllYXIpID0+IHtcbiAgY29uc3QgeWVhcnMgPSByYW5nZShtaW5ZZWFyLCBtYXhZZWFyICsgMSk7XG5cbiAgY29uc3QgZGF0YSA9IFtdO1xuXG4gIHVuRGF0YS5mb3JFYWNoKGQgPT4ge1xuICAgIGNvbnN0IG5hbWUgPSBkWydSZWdpb24sIHN1YnJlZ2lvbiwgY291bnRyeSBvciBhcmVhIConXVxuICAgICAgLnJlcGxhY2UoJ0FORCBUSEUnLCAnJicpO1xuICAgIHllYXJzLmZvckVhY2goeWVhciA9PiB7XG4gICAgICBjb25zdCBwb3B1bGF0aW9uID0gK2RbeWVhcl0ucmVwbGFjZSgvIC9nLCAnJykgKiAxMDAwO1xuICAgICAgY29uc3Qgcm93ID0ge1xuICAgICAgICB5ZWFyOiBwYXJzZVllYXIoeWVhciksXG4gICAgICAgIG5hbWUsXG4gICAgICAgIHBvcHVsYXRpb25cbiAgICAgIH07XG4gICAgICBkYXRhLnB1c2gocm93KTtcbiAgICB9KTtcbiAgfSk7XG5cbiAgcmV0dXJuIGRhdGEuZmlsdGVyKGQgPT4gaXNSZWdpb24oZC5uYW1lKSk7XG59O1xuXG5leHBvcnQgY29uc3QgbG9hZEFuZFByb2Nlc3NEYXRhID0gKCkgPT4gXG4gIFByb21pc2VcbiAgICAuYWxsKFtcbiAgICAgIGNzdignaHR0cHM6Ly92aXpodWIuY29tL2N1cnJhbi9kYXRhc2V0cy91bi1wb3B1bGF0aW9uLWVzdGltYXRlcy0yMDE3LW1lZGl1bS12YXJpYW50LmNzdicpLFxuICAgICAgY3N2KCdodHRwczovL3Zpemh1Yi5jb20vY3VycmFuL2RhdGFzZXRzL3VuLXBvcHVsYXRpb24tZXN0aW1hdGVzLTIwMTcuY3N2JyksXG4gICAgXSlcbiAgICAudGhlbigoW3VuRGF0YU1lZGl1bVZhcmlhbnQsIHVuRGF0YUVzdGltYXRlc10pID0+IHtcbiAgICAgIHJldHVybiBtZWx0KHVuRGF0YUVzdGltYXRlcywgMTk1MCwgMjAxNClcbiAgICAgICAgLmNvbmNhdChtZWx0KHVuRGF0YU1lZGl1bVZhcmlhbnQsIDIwMTUsIDIxMDApKTtcbiAgICB9KTsiLCJpbXBvcnQge1xuICBzZWxlY3QsXG4gIGNzdixcbiAgc2NhbGVMaW5lYXIsXG4gIHNjYWxlVGltZSxcbiAgc2NhbGVPcmRpbmFsLFxuICBleHRlbnQsXG4gIGF4aXNMZWZ0LFxuICBheGlzQm90dG9tLFxuICBsaW5lLFxuICBjdXJ2ZUJhc2lzLFxuICBuZXN0LFxuICBzY2hlbWVDYXRlZ29yeTEwLFxuICBkZXNjZW5kaW5nLFxuICBmb3JtYXQsXG4gIG1vdXNlXG59IGZyb20gJ2QzJztcblxuaW1wb3J0IHtcbiAgcGFyc2VZZWFyXG59IGZyb20gJy4vbG9hZEFuZFByb2Nlc3NEYXRhJztcblxuZXhwb3J0IGNvbnN0IGxpbmVDaGFydCA9IChzZWxlY3Rpb24sIHByb3BzKSA9PiB7XG4gIGNvbnN0IHtcbiAgICBjb2xvclZhbHVlLFxuICAgIGNvbG9yU2NhbGUsXG4gICAgeVZhbHVlLFxuICAgIHRpdGxlLFxuICAgIHhWYWx1ZSxcbiAgICB4QXhpc0xhYmVsLFxuICAgIGNpcmNsZVJhZGl1cyxcbiAgICB5QXhpc0xhYmVsLFxuICAgIG1hcmdpbixcbiAgICB3aWR0aCxcbiAgICBoZWlnaHQsXG4gICAgZGF0YSxcbiAgICBuZXN0ZWQsXG4gICAgc2VsZWN0ZWRZZWFyLFxuICAgIHNldFNlbGVjdGVkWWVhclxuICB9ID0gcHJvcHM7XG5cbiAgY29uc3QgaW5uZXJXaWR0aCA9IHdpZHRoIC0gbWFyZ2luLmxlZnQgLSBtYXJnaW4ucmlnaHQ7XG4gIGNvbnN0IGlubmVySGVpZ2h0ID0gaGVpZ2h0IC0gbWFyZ2luLnRvcCAtIG1hcmdpbi5ib3R0b207XG5cbiAgY29uc3QgeFNjYWxlID0gc2NhbGVUaW1lKClcbiAgICAuZG9tYWluKGV4dGVudChkYXRhLCB4VmFsdWUpKVxuICAgIC5yYW5nZShbMCwgaW5uZXJXaWR0aF0pO1xuICBcbiAgY29uc3QgeVNjYWxlID0gc2NhbGVMaW5lYXIoKVxuICAgIC5kb21haW4oZXh0ZW50KGRhdGEsIHlWYWx1ZSkpXG4gICAgLnJhbmdlKFtpbm5lckhlaWdodCwgMF0pXG4gICAgLm5pY2UoKTtcbiAgXG4gIFxuICBjb25zdCBnID0gc2VsZWN0aW9uLnNlbGVjdEFsbCgnLmNvbnRhaW5lcicpLmRhdGEoW251bGxdKTtcbiAgY29uc3QgZ0VudGVyID0gZy5lbnRlcigpXG4gICAgLmFwcGVuZCgnZycpXG4gICAgICAuYXR0cignY2xhc3MnLCAnY29udGFpbmVyJyk7XG4gIGdFbnRlci5tZXJnZShnKVxuICAgIC5hdHRyKCd0cmFuc2Zvcm0nLCBgdHJhbnNsYXRlKCR7bWFyZ2luLmxlZnR9LCR7bWFyZ2luLnRvcH0pYCk7XG4gIFxuICBjb25zdCB4QXhpcyA9IGF4aXNCb3R0b20oeFNjYWxlKVxuICAgIC50aWNrU2l6ZSgtaW5uZXJIZWlnaHQpXG4gICAgLnRpY2tQYWRkaW5nKDE1KTtcbiAgXG4gIGNvbnN0IHlBeGlzVGlja0Zvcm1hdCA9IG51bWJlciA9PlxuICAgIGZvcm1hdCgnLjJzJykobnVtYmVyKVxuICAgICAgLnJlcGxhY2UoJ0cnLCAnQicpXG4gICAgICAucmVwbGFjZSgnLjAnLCAnJyk7XG5cbiAgY29uc3QgeUF4aXMgPSBheGlzTGVmdCh5U2NhbGUpXG4gICAgLnRpY2tTaXplKC1pbm5lcldpZHRoKVxuICAgIC50aWNrRm9ybWF0KHlBeGlzVGlja0Zvcm1hdClcbiAgICAudGlja1BhZGRpbmcoMTApO1xuICBcbiAgY29uc3QgeUF4aXNHRW50ZXIgPSBnRW50ZXJcbiAgICAuYXBwZW5kKCdnJylcbiAgICAgIC5hdHRyKCdjbGFzcycsICd5LWF4aXMnKTtcbiAgY29uc3QgeUF4aXNHID0gZy5zZWxlY3QoJy55LWF4aXMnKTtcbiAgeUF4aXNHRW50ZXJcbiAgICAubWVyZ2UoeUF4aXNHKVxuICAgICAgLmNhbGwoeUF4aXMpXG4gICAgICAuc2VsZWN0QWxsKCcuZG9tYWluJykucmVtb3ZlKCk7XG4gIFxuICB5QXhpc0dFbnRlclxuICAgIC5hcHBlbmQoJ3RleHQnKVxuICAgICAgLmF0dHIoJ2NsYXNzJywgJ2F4aXMtbGFiZWwnKVxuICAgICAgLmF0dHIoJ3knLCAtNjApXG4gICAgICAuYXR0cignZmlsbCcsICdibGFjaycpXG4gICAgICAuYXR0cigndHJhbnNmb3JtJywgYHJvdGF0ZSgtOTApYClcbiAgICAgIC5hdHRyKCd0ZXh0LWFuY2hvcicsICdtaWRkbGUnKVxuICAgIC5tZXJnZSh5QXhpc0cuc2VsZWN0KCcuYXhpcy1sYWJlbCcpKVxuICAgICAgLmF0dHIoJ3gnLCAtaW5uZXJIZWlnaHQgLyAyKVxuICAgICAgLnRleHQoeUF4aXNMYWJlbCk7XG4gIFxuICBjb25zdCB4QXhpc0dFbnRlciA9IGdFbnRlclxuICAgIC5hcHBlbmQoJ2cnKVxuICAgICAgLmF0dHIoJ2NsYXNzJywgJ3gtYXhpcycpO1xuICBjb25zdCB4QXhpc0cgPSBnLnNlbGVjdCgnLngtYXhpcycpO1xuICB4QXhpc0dFbnRlclxuICAgIC5tZXJnZSh4QXhpc0cpXG4gICAgICAuY2FsbCh4QXhpcylcbiAgICAgIC5hdHRyKCd0cmFuc2Zvcm0nLCBgdHJhbnNsYXRlKDAsJHtpbm5lckhlaWdodH0pYClcbiAgICAgIC5zZWxlY3QoJy5kb21haW4nKS5yZW1vdmUoKTtcbiAgXG4gIHhBeGlzR0VudGVyXG4gICAgLmFwcGVuZCgndGV4dCcpXG4gICAgICAuYXR0cignY2xhc3MnLCAnYXhpcy1sYWJlbCcpXG4gICAgICAuYXR0cigneScsIDgwKVxuICAgICAgLmF0dHIoJ2ZpbGwnLCAnYmxhY2snKVxuICAgIC5tZXJnZSh4QXhpc0cuc2VsZWN0KCcuYXhpcy1sYWJlbCcpKVxuICAgICAgLmF0dHIoJ3gnLCBpbm5lcldpZHRoIC8gMilcbiAgICAgIC50ZXh0KHhBeGlzTGFiZWwpO1xuICBcbiAgY29uc3QgbGluZUdlbmVyYXRvciA9IGxpbmUoKVxuICAgIC54KGQgPT4geFNjYWxlKHhWYWx1ZShkKSkpXG4gICAgLnkoZCA9PiB5U2NhbGUoeVZhbHVlKGQpKSlcbiAgICAuY3VydmUoY3VydmVCYXNpcyk7XG4gIFxuICBcbiAgY29uc3QgbGluZVBhdGhzID0gZy5tZXJnZShnRW50ZXIpXG4gICAgLnNlbGVjdEFsbCgnLmxpbmUtcGF0aCcpLmRhdGEobmVzdGVkKTtcbiAgbGluZVBhdGhzXG4gICAgLmVudGVyKCkuYXBwZW5kKCdwYXRoJylcbiAgICAgIC5hdHRyKCdjbGFzcycsICdsaW5lLXBhdGgnKVxuICAgIC5tZXJnZShsaW5lUGF0aHMpXG4gICAgICAuYXR0cignZCcsIGQgPT4gbGluZUdlbmVyYXRvcihkLnZhbHVlcykpXG4gICAgICAuYXR0cignc3Ryb2tlJywgZCA9PiBjb2xvclNjYWxlKGQua2V5KSk7XG4gIFxuICBjb25zdCBzZWxlY3RlZFllYXJEYXRlID0gcGFyc2VZZWFyKHNlbGVjdGVkWWVhcik7XG4gIGdFbnRlclxuICAgIC5hcHBlbmQoJ2xpbmUnKVxuICAgICAgLmF0dHIoJ2NsYXNzJywgJ3NlbGVjdGVkLXllYXItbGluZScpXG4gICAgICAuYXR0cigneTEnLCAwKVxuICAgIC5tZXJnZShnLnNlbGVjdCgnLnNlbGVjdGVkLXllYXItbGluZScpKVxuICAgICAgLmF0dHIoJ3gxJywgeFNjYWxlKHNlbGVjdGVkWWVhckRhdGUpKVxuICAgICAgLmF0dHIoJ3gyJywgeFNjYWxlKHNlbGVjdGVkWWVhckRhdGUpKVxuICAgICAgLmF0dHIoJ3kyJywgaW5uZXJIZWlnaHQpO1xuICBcbiAgZ0VudGVyXG4gICAgLmFwcGVuZCgndGV4dCcpXG4gICAgICAuYXR0cignY2xhc3MnLCAndGl0bGUnKVxuICAgICAgLmF0dHIoJ3knLCAtMTApXG4gICAgLm1lcmdlKGcuc2VsZWN0KCcudGl0bGUnKSlcbiAgICAgIC50ZXh0KHRpdGxlKTtcbiAgXG4gIGdFbnRlclxuICAgIC5hcHBlbmQoJ3JlY3QnKVxuICAgICAgLmF0dHIoJ2NsYXNzJywgJ21vdXNlLWludGVyY2VwdG9yJylcbiAgICAgIC5hdHRyKCdmaWxsJywgJ25vbmUnKVxuICAgICAgLmF0dHIoJ3BvaW50ZXItZXZlbnRzJywgJ2FsbCcpXG4gICAgLm1lcmdlKGcuc2VsZWN0KCcubW91c2UtaW50ZXJjZXB0b3InKSlcbiAgICAgIC5hdHRyKCd3aWR0aCcsIGlubmVyV2lkdGgpXG4gICAgICAuYXR0cignaGVpZ2h0JywgaW5uZXJIZWlnaHQpXG4gICAgICAub24oJ21vdXNlbW92ZScsIGZ1bmN0aW9uKCkge1xuICAgICAgICBjb25zdCB4ID0gbW91c2UodGhpcylbMF07XG4gICAgICAgIGNvbnN0IGhvdmVyZWREYXRlID0geFNjYWxlLmludmVydCh4KTtcbiAgICAgICAgc2V0U2VsZWN0ZWRZZWFyKGhvdmVyZWREYXRlLmdldEZ1bGxZZWFyKCkpO1xuICAgICAgfSk7XG59OyIsImltcG9ydCB7XG4gIHNlbGVjdCxcbiAgY3N2LFxuICBzY2FsZUxpbmVhcixcbiAgc2NhbGVUaW1lLFxuICBzY2FsZU9yZGluYWwsXG4gIGV4dGVudCxcbiAgYXhpc0xlZnQsXG4gIGF4aXNCb3R0b20sXG4gIGxpbmUsXG4gIGN1cnZlQmFzaXMsXG4gIG5lc3QsXG4gIHNjaGVtZUNhdGVnb3J5MTAsXG4gIGRlc2NlbmRpbmcsXG4gIGZvcm1hdCxcbiAgbW91c2Vcbn0gZnJvbSAnZDMnO1xuXG5pbXBvcnQgeyBjb2xvckxlZ2VuZCB9IGZyb20gJy4vY29sb3JMZWdlbmQnO1xuaW1wb3J0IHtcbiAgbG9hZEFuZFByb2Nlc3NEYXRhLFxuICBwYXJzZVllYXJcbn0gZnJvbSAnLi9sb2FkQW5kUHJvY2Vzc0RhdGEnO1xuaW1wb3J0IHsgbGluZUNoYXJ0IH0gZnJvbSAnLi9saW5lQ2hhcnQnO1xuXG5jb25zdCBzdmcgPSBzZWxlY3QoJ3N2ZycpO1xuY29uc3QgbGluZUNoYXJ0RyA9IHN2Zy5hcHBlbmQoJ2cnKTtcbmNvbnN0IGNvbG9yTGVnZW5kRyA9IHN2Zy5hcHBlbmQoJ2cnKTtcblxuY29uc3Qgd2lkdGggPSArc3ZnLmF0dHIoJ3dpZHRoJyk7XG5jb25zdCBoZWlnaHQgPSArc3ZnLmF0dHIoJ2hlaWdodCcpO1xuXG4vLyBTdGF0ZVxubGV0IHNlbGVjdGVkWWVhciA9IDIwMTg7XG5sZXQgZGF0YTtcblxuY29uc3Qgc2V0U2VsZWN0ZWRZZWFyID0geWVhciA9PiB7XG4gIHNlbGVjdGVkWWVhciA9IHllYXI7XG4gIHJlbmRlcigpO1xufTtcblxuY29uc3QgcmVuZGVyID0gKCkgPT4ge1xuICBjb25zdCB5VmFsdWUgPSBkID0+IGQucG9wdWxhdGlvbjtcbiAgY29uc3QgY29sb3JWYWx1ZSA9IGQgPT4gZC5uYW1lO1xuICBjb25zdCBjb2xvclNjYWxlID0gc2NhbGVPcmRpbmFsKHNjaGVtZUNhdGVnb3J5MTApO1xuICBcbiAgY29uc3QgbGFzdFlWYWx1ZSA9IGQgPT5cbiAgICB5VmFsdWUoZC52YWx1ZXNbZC52YWx1ZXMubGVuZ3RoIC0gMV0pO1xuICBcbiAgY29uc3QgbmVzdGVkID0gbmVzdCgpXG4gICAgLmtleShjb2xvclZhbHVlKVxuICAgIC5lbnRyaWVzKGRhdGEpXG4gICAgLnNvcnQoKGEsIGIpID0+XG4gICAgICBkZXNjZW5kaW5nKGxhc3RZVmFsdWUoYSksIGxhc3RZVmFsdWUoYikpXG4gICAgKTtcbiAgXG4gIGNvbG9yU2NhbGUuZG9tYWluKG5lc3RlZC5tYXAoZCA9PiBkLmtleSkpO1xuICBcbiAgbGluZUNoYXJ0Ry5jYWxsKGxpbmVDaGFydCwge1xuICAgIGNvbG9yU2NhbGUsXG4gICAgY29sb3JWYWx1ZSxcbiAgICB5VmFsdWUsXG4gICAgdGl0bGU6ICdQb3B1bGF0aW9uIG92ZXIgVGltZSBieSBSZWdpb24nLFxuICAgIHhWYWx1ZTogZCA9PiBkLnllYXIsXG4gICAgeEF4aXNMYWJlbDogJ1RpbWUnLFxuICAgIGNpcmNsZVJhZGl1czogNixcbiAgICB5QXhpc0xhYmVsOiAnUG9wdWxhdGlvbicsXG4gICAgbWFyZ2luOiB7XG4gICAgICB0b3A6IDYwLFxuICAgICAgcmlnaHQ6IDI4MCxcbiAgICAgIGJvdHRvbTogODgsXG4gICAgICBsZWZ0OiAxMDVcbiAgICB9LFxuICAgIHdpZHRoLFxuICAgIGhlaWdodCxcbiAgICBkYXRhLFxuICAgIG5lc3RlZCxcbiAgICBzZWxlY3RlZFllYXIsXG4gICAgc2V0U2VsZWN0ZWRZZWFyXG4gIH0pO1xuICBcbiAgY29sb3JMZWdlbmRHXG4gICAgLmF0dHIoJ3RyYW5zZm9ybScsIGB0cmFuc2xhdGUoNzAwLDExMClgKVxuICAgIC5jYWxsKGNvbG9yTGVnZW5kLCB7XG4gICAgICBjb2xvclNjYWxlLFxuICAgICAgY2lyY2xlUmFkaXVzOiAxMCxcbiAgICAgIHNwYWNpbmc6IDU1LFxuICAgICAgdGV4dE9mZnNldDogMTVcbiAgICB9KTtcbn07XG5cbmxvYWRBbmRQcm9jZXNzRGF0YSgpXG4gIC50aGVuKChsb2FkZWREYXRhKSA9PiB7XG4gICAgZGF0YSA9IGxvYWRlZERhdGE7XG4gICAgcmVuZGVyKCk7XG4gIH0pOyJdLCJuYW1lcyI6WyJ0aW1lUGFyc2UiLCJyYW5nZSIsImNzdiIsInNjYWxlVGltZSIsImV4dGVudCIsInNjYWxlTGluZWFyIiwiYXhpc0JvdHRvbSIsImZvcm1hdCIsImF4aXNMZWZ0IiwibGluZSIsImN1cnZlQmFzaXMiLCJtb3VzZSIsInNlbGVjdCIsInNjYWxlT3JkaW5hbCIsInNjaGVtZUNhdGVnb3J5MTAiLCJuZXN0IiwiZGVzY2VuZGluZyJdLCJtYXBwaW5ncyI6Ijs7O0VBQU8sTUFBTSxXQUFXLEdBQUcsQ0FBQyxTQUFTLEVBQUUsS0FBSyxLQUFLO0VBQ2pELEVBQUUsTUFBTTtFQUNSLElBQUksVUFBVTtFQUNkLElBQUksWUFBWTtFQUNoQixJQUFJLE9BQU87RUFDWCxJQUFJLFVBQVU7RUFDZCxHQUFHLEdBQUcsS0FBSyxDQUFDOztFQUVaLEVBQUUsTUFBTSxNQUFNLEdBQUcsU0FBUyxDQUFDLFNBQVMsQ0FB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